# План работ: Задача №4 "Полет вокруг Луны"

## I. Математическая модель и подготовка

На этом этапе осуществляется перевод физической задачи в форму, пригодную для численного интегрирования.

### 1. Сбор и стандартизация констант
1.1. Определение основных физических констант ($G, m_1, m_2$) и начальных радиусов ($R_{Земли}, R_{Орбиты Луны}$).
1.2. Определение угловой скорости Луны ($\omega_{Луны}$) на основе ее физического орбитального периода ($\approx 27.32$ суток) для корректной подстановки в формулу $\mathbf{r}_2(t)$.

### 2. Сведение к системе ОДУ первого порядка
2.1. Определение **вектора состояния** $\mathbf{Y}$ с четырьмя компонентами (2D-положение и 2D-скорость ЛА):
$$\mathbf{Y} = (x_3, y_3, \dot{x}_3, \dot{y}_3)^T$$
2.2. Создание функции правой части **$f(t, \mathbf{Y})$** (функция ускорения), которая вычисляет производную вектора состояния $\frac{d\mathbf{Y}}{dt}$ согласно дифференциальному уравнению движения:
$$\frac{d\mathbf{Y}}{dt} = \begin{pmatrix} \mathbf{v}_3 \\ \mathbf{a}_3 \end{pmatrix}$$

***

## II. Численные методы и интегрирование

На этом этапе реализуются и запускаются методы решения задачи Коши.

### 1. Реализация численных методов
1.1. Реализация **метода Рунге-Кутты 4-го порядка (РК-4)** для векторного ОДУ. Этот метод будет использоваться для получения первых четырех точек, необходимых для запуска метода Адамса-Башфорта.
1.2. Реализация **метода Адамса-Башфорта 4-го порядка (АБ-4)**.

### 2. Установка тестовых начальных условий
2.1. **Выбор цели**: Задача 1 — "Сделать полный оборот вокруг Луны".
2.2. **Определение начальной позиции** ($\mathbf{r}_3(0)$): Старт с поверхности Земли (например, $\mathbf{r}_3(0)$ по углу $\alpha$ с радиусом $R_{Земли} = 6,371,000 \text{ м}$).
2.3. **Определение начальной скорости** ($\mathbf{v}_3(0)$):
    * Величина скорости $V_{start}$ должна быть $\ge 11200 \text{ м/с}$ (вторая космическая скорость). Выбирается $V_{start} = 11250 \text{ м/с}$.
    * Направление скорости $\alpha$ выбирается для перехвата Луны, исходя из ее положения в $t=0$.
2.4. **Определение параметров интегрирования**: Установка малого шага $h$ (например, $h=100.0 \text{ с}$) для обеспечения численной стабильности и общего времени симуляции ($T_{общ} \approx 4-5$ суток) для достижения Луны.

### 3. Запуск интегрирования
3.1. Расчет первых 4 точек с помощью **РК-4**.
3.2. Расчет полной траектории $Y_{sol}$ с помощью **АБ-4** до $T_{общ}$.

***

## III. Визуализация и проверка результата

На этом этапе создается финальный продукт — анимация, демонстрирующая физическую суть процесса.

### 1. Настройка анимации
1.1. Создание функции `animate_solution` с использованием `matplotlib.animation.FuncAnimation`.
1.2. **Фиксация масштаба**: Установка пределов осей $\text{xlim}$ и $\text{ylim}$ для ограничения видимой области (например, $\pm 1.5 \times R_{Орбиты Луны}$) с целью четкой визуализации орбиты Луны.
1.3. Реализация функции `update(i)` для динамического обновления положения Земли, Луны и ЛА на каждом кадре. Увеличение параметра `interval` для замедления воспроизведения.
